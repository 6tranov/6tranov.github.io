(function(){"use strict";var e={1447:function(e,t,i){var n=i(9242),a=i(3396);function o(e,t,i,n,o,s){const r=(0,a.up)("TimeTable"),l=(0,a.up)("BootstrapText");return(0,a.wg)(),(0,a.iD)(a.HY,null,[(0,a.Wm)(r),(0,a.Wm)(l)],64)}var s=i(7139);const r={class:"card",style:{width:"fit-content",margin:"auto"}},l={class:"card-header"},d={class:"list-group list-group-flush"},m={class:"list-group-item",style:{padding:"0"}},u={style:{padding:"0"}},c=["for"],h=["id","onUpdate:modelValue","onBlur","onKeydown"],f=(0,a._)("td",{rowspan:"2",class:"drag-border handle-only-this handle-item",valign:"middle",style:{padding:"0"}},[(0,a._)("div",{class:"hamberger"},[(0,a._)("div"),(0,a._)("div"),(0,a._)("div")])],-1),b={style:{padding:"0"},class:"action-text-border"},w=["onUpdate:modelValue","onKeydown"];function g(e,t,i,o,g,T){const p=(0,a.up)("draggable");return(0,a.wg)(),(0,a.iD)("div",null,[(0,a.Wm)(p,{list:g.emptyListOfDeleteArea,disabled:!g.enabled,"item-key":"id",handle:".handle-only-this",animation:"350",group:"day",style:{border:"solid",height:"57px"},id:"deleteArea"},{item:(0,a.w5)((({element:e})=>[(0,a._)("div",null,(0,s.zw)(e),1)])),_:1},8,["list","disabled"]),((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(g.timeTable,(e=>((0,a.wg)(),(0,a.iD)("div",{key:e.id},[(0,a._)("div",r,[(0,a._)("div",l,(0,s.zw)(e.date),1),(0,a._)("div",d,[(0,a._)("table",null,[(0,a.Wm)(p,{list:e.rows,disabled:!g.enabled,"item-key":"id",onChange:t=>T.modifyTimeWhenMoved(t,T.getDateIndexFromDateID(e.id)),onStart:T.enableDeleteArea,onEnd:t[1]||(t[1]=e=>{T.disableDeleteArea(),T.clearEmptyListOfDeleteArea()}),handle:".handle-only-this",animation:"350",group:"day"},{item:(0,a.w5)((({element:e})=>[(0,a._)("div",m,[(0,a._)("tr",null,[(0,a._)("td",u,[(0,a._)("label",{for:"time"+e.id,class:"label-item"},[(0,a.wy)((0,a._)("input",{type:"time",id:"time"+e.id,class:"time","onUpdate:modelValue":t=>e.time=t,onFocus:t[0]||(t[0]=e=>T.setOldTime(e.target.value)),onBlur:t=>T.modifyTimeWhenChanged(T.getDateIndexAndRowIndexPairFromRowID(e.id)),onKeydown:(0,n.D2)((t=>T.focusNextAction(e.id)),["enter"]),ref_for:!0,ref:"time"+e.id},null,40,h),[[n.nr,e.time]])],8,c)]),f]),(0,a._)("tr",null,[(0,a._)("td",b,[(0,a.wy)((0,a._)("input",{type:"text",style:{border:"none","text-align":"center"},"onUpdate:modelValue":t=>e.action=t,placeholder:"Write your action",onKeydown:(0,n.D2)((t=>{T.createRowWhenLastDateLastRow(T.getDateIndexAndRowIndexPairFromRowID(e.id)),this.$nextTick((function(){T.focusNextTime(T.getDateIndexAndRowIndexPairFromRowID(e.id))}))}),["enter"]),ref_for:!0,ref:"action"+e.id},null,40,w),[[n.nr,e.action]])])])])])),_:2},1032,["list","disabled","onChange","onStart"])])])])])))),128)),(0,a._)("div",null,[(0,a.wy)((0,a._)("input",{type:"time","onUpdate:modelValue":t[2]||(t[2]=e=>g.lastTime=e),ref:"lastTime",onFocus:t[3]||(t[3]=e=>T.setOldLastTime(e.target.value)),onBlur:t[4]||(t[4]=e=>T.lastTimeValidation()),onKeydown:t[5]||(t[5]=(0,n.D2)((t=>e.$refs["lastTime"].blur()),["enter"]))},null,544),[[n.nr,g.lastTime]])]),(0,a._)("button",{class:"btn btn-secondary",onClick:t[6]||(t[6]=(...e)=>T.pushRow&&T.pushRow(...e))}," スケジュールを追加 "),(0,a._)("button",{class:"btn btn-secondary",onClick:t[7]||(t[7]=(...e)=>T.copyToClipboard&&T.copyToClipboard(...e))},"Copy"),(0,a._)("button",{class:"btn btn-danger",onClick:t[8]||(t[8]=(...e)=>T.reset&&T.reset(...e))},"リセット")])}var T=i(6983),p=i.n(T),y=i(5269),v=i.n(y);function D(e,t){const i=Number(e.substr(0,2)),n=Number(t.substr(0,2));if(i<n)return!0;if(n<i)return!1;const a=Number(e.substr(3,2)),o=Number(t.substr(3,2));return a<=o}function _(){const e=new Date,t=("0000"+e.getFullYear()).slice(-4),i=("00"+e.getMonth()+1).slice(-2),n=("00"+e.getDate()).slice(-2);return`${t}-${i}-${n}`}function I(e,t){for(var i=[],n=0;n<e.length;n++){var a=!1;if(0<n){var o=new Date(e[n-1].date.substr(0,4),e[n-1].date.substr(5,2),e[n-1].date.substr(8,2));o.setDate(o.getDate()+1);var s=new Date(e[n].date.substr(0,4),e[n].date.substr(5,2),e[n].date.substr(8,2));while(o<s){const t=("0000"+o.getFullYear()).slice(-4),a=("00"+o.getMonth()).slice(-2),s=("00"+o.getDate()).slice(-2);i.push({date:`${t}-${a}-${s}`,time:"00:00~24:00",action:e[n-1].rows[e[n-1].rows.length-1].action}),o.setDate(o.getDate()+1)}e[n].rows.length>0&&"00:00"!==e[n].rows[0].time&&(i.push({date:e[n].date,time:`00:00~${e[n].rows[0].time}`,action:e[n-1].rows[e[n-1].rows.length-1].action}),a=!0),0==e[n].rows.length&&"00:00"!==t&&(i.push({date:e[n].date,time:`00:00~${t}`,action:e[n-1].rows[e[n-1].rows.length-1].action}),a=!0)}for(var r=0;r<e[n].rows.length;r++){var l="";a||(l=e[n].date,a=!0),r<e[n].rows.length-1?i.push({date:l,time:`${e[n].rows[r].time}~${e[n].rows[r+1].time}`,action:e[n].rows[r].action}):n<e.length-1?i.push({date:l,time:`${e[n].rows[r].time}~24:00`,action:e[n].rows[r].action}):i.push({date:l,time:`${e[n].rows[r].time}~${t}`,action:e[n].rows[r].action})}}return i}function R(e){var t="";t+="|日付|時間|行動|\n",t+="|:-:|:-:|:-:|\n";for(const i of e)t+=`|${i.date}|${i.time}|${i.action}|\n`;return t}function O(e){return`time${e}`}var x={name:"TimeTable",display:"TimeTable",order:0,components:{draggable:p()},data(){return{enabled:!0,dragging:!1,timeTable:[{id:0,date:_(),rows:[{id:0,time:"09:15",action:""}]}],lastTime:"17:45",lastTimeRef:"lastTime",emptyListOfDeleteArea:[],oldTime:"00:00",lastRowID:0,oldLastTime:"23:59"}},created(){null===v().get("timeTable")||null===v().get("lastTime")||null===v().get("lastRowID")?this.setDefault():(this.timeTable=JSON.parse(v().get("timeTable")),this.lastTime=JSON.parse(v().get("lastTime")),this.lastRowID=JSON.parse(v().get("lastRowID")))},computed:{draggingInfo(){return this.dragging?"under drag":""}},methods:{lastTimeValidation(){if(1!=this.timeTable.length||0!=this.timeTable[0].rows.length){var e=null,t=null;0==this.timeTable[this.timeTable.length-1].rows.length?(alert(0),e=this.timeTable.length-2,t=this.timeTable[e].rows-1):(e=this.timeTable.length-1,t=this.timeTable[e].rows.length-1),this.isCorrectTimeOrder(e,t)||(this.lastTime=this.oldLastTime,alert("wrong time order."),this.$refs["lastTime"].focus())}},reset(){window.confirm("リセットします。よろしいですか？")&&this.setDefault()},setDefault(){this.timeTable=[{id:0,date:_(),rows:[{id:0,time:"09:15",action:""}]}],this.lastRowID=0,this.lastTime="17:45"},getDateIndexFromDateID(e){for(var t=0;t<this.timeTable.length;t++)if(this.timeTable[t].id===e)return t;return null},getDateIndexAndRowIndexPairFromRowID(e){for(var t=0;t<this.timeTable.length;t++)for(var i=0;i<this.timeTable[t].rows.length;i++)if(this.timeTable[t].rows[i].id===e)return[t,i];return null},addNewRowBehindLastDateLastRow:function(){const e={id:this.lastID+1,time:this.lastTime,action:""};this.timeTable.push(e)},checkMove:function(e){document.getElementById("deleteArea").style.backgroundColor="red"},a:function(e){alert(e)},ai:function(e){alert(e.moved.newIndex)},enableDeleteArea:function(){document.getElementById("deleteArea").style.backgroundColor="red"},disableDeleteArea:function(){document.getElementById("deleteArea").style.backgroundColor="white"},clearEmptyListOfDeleteArea:function(){this.emptyListOfDeleteArea=[]},copyToClipboard:function(){const e=I(this.timeTable,this.lastTime),t=R(e);navigator.clipboard.writeText(t),alert("copied.")},modifyTimeWhenMoved(e,t){if("undefined"!==typeof e.removed)return;const i=t;var n=null;"undefined"!==typeof e.moved&&(n=e.moved.newIndex),"undefined"!==typeof e.added&&(n=e.added.newIndex),this.setSameTimeAsBelow(i,n)},setSameTimeAsBelow(e,t){t<this.timeTable[e].rows.length-1?this.timeTable[e].rows[t].time=this.timeTable[e].rows[t+1].time:e!=this.timeTable.length-1?this.timeTable[e].rows[t].time=0<t?this.timeTable[e].rows[t-1].time:"00:00":this.timeTable[e].rows[t].time=this.lastTime},setOldTime(e){this.oldTime=e},setOldLastTime(e){this.oldLastTime=e},modifyTimeWhenChanged(e){const t=e[0],i=e[1];if(!this.isCorrectTimeOrder(t,i)){this.timeTable[t].rows[i].time=this.oldTime,alert("wrong time order.");const e=this.timeTable[t].rows[i].id;this.$refs[`time${e}`][0].focus()}},isCorrectTimeOrder(e,t){var i=null,n=this.timeTable[e].rows[t].time,a=null;return i=0<t?this.timeTable[e].rows[t-1].time:"00:00",a=t<this.timeTable[e].rows.length-1?this.timeTable[e].rows[t+1].time:e===this.timeTable.length-1?this.lastTime:"23:59",D(i,n)&&D(n,a)},focusNextAction(e){this.$refs[`action${e}`][0].focus()},focusNextTime(e){const t=e[0],i=e[1];var n=null;if(i<this.timeTable[t].rows.length-1){const e=this.timeTable[t].rows[i+1].id;n=O(e)}else if(t<this.timeTable.length-1)if(0===this.timeTable[t+1].rows.length)n=this.lastTimeRef;else{const e=this.timeTable[t+1].rows[0].id;n=O(e)}else n=this.lastTimeRef;n===this.lastTimeRef?this.$refs[n].focus():this.$refs[n][0].focus()},createRowWhenLastDateLastRow(e){const t=e[0],i=e[1];t===this.timeTable.length-1&&i===this.timeTable[t].rows.length-1&&this.pushRow()},pushRow(){this.lastRowID++,this.timeTable[this.timeTable.length-1].rows.push({id:this.lastRowID,time:this.lastTime,action:""})}},watch:{timeTable:{handler:function(){v().remove("timeTable"),v().remove("lastTime"),v().remove("lastRowID"),v().set("timeTable",JSON.stringify(this.timeTable)),v().set("lastTime",JSON.stringify(this.lastTime)),v().set("lastRowID",JSON.stringify(this.lastRowID))},deep:!0}}},$=i(89);const A=(0,$.Z)(x,[["render",g]]);var C=A,k=(0,a.aZ)({name:"App",components:{TimeTable:C}});const L=(0,$.Z)(k,[["render",o]]);var N=L;(0,n.ri)(N).mount("#app")}},t={};function i(n){var a=t[n];if(void 0!==a)return a.exports;var o=t[n]={exports:{}};return e[n].call(o.exports,o,o.exports,i),o.exports}i.m=e,function(){var e=[];i.O=function(t,n,a,o){if(!n){var s=1/0;for(m=0;m<e.length;m++){n=e[m][0],a=e[m][1],o=e[m][2];for(var r=!0,l=0;l<n.length;l++)(!1&o||s>=o)&&Object.keys(i.O).every((function(e){return i.O[e](n[l])}))?n.splice(l--,1):(r=!1,o<s&&(s=o));if(r){e.splice(m--,1);var d=a();void 0!==d&&(t=d)}}return t}o=o||0;for(var m=e.length;m>0&&e[m-1][2]>o;m--)e[m]=e[m-1];e[m]=[n,a,o]}}(),function(){i.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return i.d(t,{a:t}),t}}(),function(){i.d=function(e,t){for(var n in t)i.o(t,n)&&!i.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})}}(),function(){i.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}()}(),function(){i.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)}}(),function(){i.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})}}(),function(){var e={143:0};i.O.j=function(t){return 0===e[t]};var t=function(t,n){var a,o,s=n[0],r=n[1],l=n[2],d=0;if(s.some((function(t){return 0!==e[t]}))){for(a in r)i.o(r,a)&&(i.m[a]=r[a]);if(l)var m=l(i)}for(t&&t(n);d<s.length;d++)o=s[d],i.o(e,o)&&e[o]&&e[o][0](),e[o]=0;return i.O(m)},n=self["webpackChunktime_table_maker"]=self["webpackChunktime_table_maker"]||[];n.forEach(t.bind(null,0)),n.push=t.bind(null,n.push.bind(n))}();var n=i.O(void 0,[998],(function(){return i(1447)}));n=i.O(n)})();
//# sourceMappingURL=app.38e7a6a5.js.map